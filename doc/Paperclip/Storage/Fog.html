<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Paperclip::Storage::Fog - RDoc Documentation</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>vendor/plugins/paperclip/lib/paperclip/storage/fog.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-extended">::extended</a>
    
    <li><a href="#method-i-copy_to_local_file">#copy_to_local_file</a>
    
    <li><a href="#method-i-exists-3F">#exists?</a>
    
    <li><a href="#method-i-expiring_url">#expiring_url</a>
    
    <li><a href="#method-i-flush_deletes">#flush_deletes</a>
    
    <li><a href="#method-i-flush_writes">#flush_writes</a>
    
    <li><a href="#method-i-fog_credentials">#fog_credentials</a>
    
    <li><a href="#method-i-fog_file">#fog_file</a>
    
    <li><a href="#method-i-fog_public">#fog_public</a>
    
    <li><a href="#method-i-parse_credentials">#parse_credentials</a>
    
    <li><a href="#method-i-public_url">#public_url</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../../Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../../public/robots_txt.html">robots</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/Appraisals.html">Appraisals</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/NEWS.html">NEWS</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/UPGRADING.html">UPGRADING</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/features/support/fixtures/boot_config_txt.html">boot_config</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/features/support/fixtures/gemfile_txt.html">gemfile</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/features/support/fixtures/preinitializer_txt.html">preinitializer</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/lib/generators/paperclip/USAGE.html">USAGE</a>
  
    <li class="file"><a href="../../vendor/plugins/paperclip/test/fixtures/text_txt.html">text</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Paperclip.html">Paperclip</a>
  
    <li><a href="../../Paperclip/AbstractAdapter.html">Paperclip::AbstractAdapter</a>
  
    <li><a href="../../Paperclip/AdapterRegistry.html">Paperclip::AdapterRegistry</a>
  
    <li><a href="../../Paperclip/AdapterRegistry/NoHandlerError.html">Paperclip::AdapterRegistry::NoHandlerError</a>
  
    <li><a href="../../Paperclip/Attachment.html">Paperclip::Attachment</a>
  
    <li><a href="../../Paperclip/AttachmentAdapter.html">Paperclip::AttachmentAdapter</a>
  
    <li><a href="../../Paperclip/AttachmentOptions.html">Paperclip::AttachmentOptions</a>
  
    <li><a href="../../Paperclip/Callbacks.html">Paperclip::Callbacks</a>
  
    <li><a href="../../Paperclip/Callbacks/Defining.html">Paperclip::Callbacks::Defining</a>
  
    <li><a href="../../Paperclip/Callbacks/Running.html">Paperclip::Callbacks::Running</a>
  
    <li><a href="../../Paperclip/ClassMethods.html">Paperclip::ClassMethods</a>
  
    <li><a href="../../Paperclip/ContentTypeDetector.html">Paperclip::ContentTypeDetector</a>
  
    <li><a href="../../Paperclip/Error.html">Paperclip::Error</a>
  
    <li><a href="../../Paperclip/Errors.html">Paperclip::Errors</a>
  
    <li><a href="../../Paperclip/Errors/CommandNotFoundError.html">Paperclip::Errors::CommandNotFoundError</a>
  
    <li><a href="../../Paperclip/Errors/InfiniteInterpolationError.html">Paperclip::Errors::InfiniteInterpolationError</a>
  
    <li><a href="../../Paperclip/Errors/NotIdentifiedByImageMagickError.html">Paperclip::Errors::NotIdentifiedByImageMagickError</a>
  
    <li><a href="../../Paperclip/Errors/StorageMethodNotFound.html">Paperclip::Errors::StorageMethodNotFound</a>
  
    <li><a href="../../Paperclip/FileAdapter.html">Paperclip::FileAdapter</a>
  
    <li><a href="../../Paperclip/Geometry.html">Paperclip::Geometry</a>
  
    <li><a href="../../Paperclip/Glue.html">Paperclip::Glue</a>
  
    <li><a href="../../Paperclip/Helpers.html">Paperclip::Helpers</a>
  
    <li><a href="../../Paperclip/IdentityAdapter.html">Paperclip::IdentityAdapter</a>
  
    <li><a href="../../Paperclip/Interpolations.html">Paperclip::Interpolations</a>
  
    <li><a href="../../Paperclip/Logger.html">Paperclip::Logger</a>
  
    <li><a href="../../Paperclip/NilAdapter.html">Paperclip::NilAdapter</a>
  
    <li><a href="../../Paperclip/Processor.html">Paperclip::Processor</a>
  
    <li><a href="../../Paperclip/ProcessorHelpers.html">Paperclip::ProcessorHelpers</a>
  
    <li><a href="../../Paperclip/Railtie.html">Paperclip::Railtie</a>
  
    <li><a href="../../Paperclip/Schema.html">Paperclip::Schema</a>
  
    <li><a href="../../Paperclip/Schema/CommandRecorder.html">Paperclip::Schema::CommandRecorder</a>
  
    <li><a href="../../Paperclip/Schema/Statements.html">Paperclip::Schema::Statements</a>
  
    <li><a href="../../Paperclip/Schema/TableDefinition.html">Paperclip::Schema::TableDefinition</a>
  
    <li><a href="../../Paperclip/Shoulda.html">Paperclip::Shoulda</a>
  
    <li><a href="../../Paperclip/Shoulda/Matchers.html">Paperclip::Shoulda::Matchers</a>
  
    <li><a href="../../Paperclip/Shoulda/Matchers/HaveAttachedFileMatcher.html">Paperclip::Shoulda::Matchers::HaveAttachedFileMatcher</a>
  
    <li><a href="../../Paperclip/Shoulda/Matchers/ValidateAttachmentContentTypeMatcher.html">Paperclip::Shoulda::Matchers::ValidateAttachmentContentTypeMatcher</a>
  
    <li><a href="../../Paperclip/Shoulda/Matchers/ValidateAttachmentPresenceMatcher.html">Paperclip::Shoulda::Matchers::ValidateAttachmentPresenceMatcher</a>
  
    <li><a href="../../Paperclip/Shoulda/Matchers/ValidateAttachmentSizeMatcher.html">Paperclip::Shoulda::Matchers::ValidateAttachmentSizeMatcher</a>
  
    <li><a href="../../Paperclip/Storage.html">Paperclip::Storage</a>
  
    <li><a href="../../Paperclip/Storage/Filesystem.html">Paperclip::Storage::Filesystem</a>
  
    <li><a href="../../Paperclip/Storage/Fog.html">Paperclip::Storage::Fog</a>
  
    <li><a href="../../Paperclip/Storage/S3.html">Paperclip::Storage::S3</a>
  
    <li><a href="../../Paperclip/StringioAdapter.html">Paperclip::StringioAdapter</a>
  
    <li><a href="../../Paperclip/Style.html">Paperclip::Style</a>
  
    <li><a href="../../Paperclip/Tempfile.html">Paperclip::Tempfile</a>
  
    <li><a href="../../Paperclip/TempfileEncoding.html">Paperclip::TempfileEncoding</a>
  
    <li><a href="../../Paperclip/TempfileFactory.html">Paperclip::TempfileFactory</a>
  
    <li><a href="../../Paperclip/TempfileFactoryTest.html">Paperclip::TempfileFactoryTest</a>
  
    <li><a href="../../Paperclip/Thumbnail.html">Paperclip::Thumbnail</a>
  
    <li><a href="../../Paperclip/UploadedFileAdapter.html">Paperclip::UploadedFileAdapter</a>
  
    <li><a href="../../Paperclip/UriAdapter.html">Paperclip::UriAdapter</a>
  
    <li><a href="../../Paperclip/UrlGenerator.html">Paperclip::UrlGenerator</a>
  
    <li><a href="../../Paperclip/Validators.html">Paperclip::Validators</a>
  
    <li><a href="../../Paperclip/Validators/AttachmentContentTypeValidator.html">Paperclip::Validators::AttachmentContentTypeValidator</a>
  
    <li><a href="../../Paperclip/Validators/AttachmentPresenceValidator.html">Paperclip::Validators::AttachmentPresenceValidator</a>
  
    <li><a href="../../Paperclip/Validators/AttachmentSizeValidator.html">Paperclip::Validators::AttachmentSizeValidator</a>
  
    <li><a href="../../Paperclip/Validators/ClassMethods.html">Paperclip::Validators::ClassMethods</a>
  
    <li><a href="../../Paperclip/Validators/HelperMethods.html">Paperclip::Validators::HelperMethods</a>
  
    <li><a href="../../AttachmentTest.html">AttachmentTest</a>
  
    <li><a href="../../AttachmentTest/AttachmentTest.html">AttachmentTest::AttachmentTest</a>
  
    <li><a href="../../AttachmentTest/AttachmentTest/Paperclip.html">AttachmentTest::AttachmentTest::Paperclip</a>
  
    <li><a href="../../AttachmentTest/AttachmentTest/Paperclip/Test.html">AttachmentTest::AttachmentTest::Paperclip::Test</a>
  
    <li><a href="../../Test.html">Test</a>
  
    <li><a href="../../Test/Unit.html">Test::Unit</a>
  
    <li><a href="../../Test/Unit/TestCase.html">Test::Unit::TestCase</a>
  
    <li><a href="../../AbstractAdapterTest.html">AbstractAdapterTest</a>
  
    <li><a href="../../AbstractAdapterTest/TestAdapter.html">AbstractAdapterTest::TestAdapter</a>
  
    <li><a href="../../ActionController.html">ActionController</a>
  
    <li><a href="../../ActionController/Integration.html">ActionController::Integration</a>
  
    <li><a href="../../AdapterRegistryTest.html">AdapterRegistryTest</a>
  
    <li><a href="../../AdapterRegistryTest/AdapterTest.html">AdapterRegistryTest::AdapterTest</a>
  
    <li><a href="../../BestBay.html">BestBay</a>
  
    <li><a href="../../BestBay/Application.html">BestBay::Application</a>
  
    <li><a href="../../FactoryGirl.html">FactoryGirl</a>
  
    <li><a href="../../FactoryGirl/Factory.html">FactoryGirl::Factory</a>
  
    <li><a href="../../FakeWeb.html">FakeWeb</a>
  
    <li><a href="../../FakeWeb/StubSocket.html">FakeWeb::StubSocket</a>
  
    <li><a href="../../One.html">One</a>
  
    <li><a href="../../One/Two.html">One::Two</a>
  
    <li><a href="../../PaperclipTest.html">PaperclipTest</a>
  
    <li><a href="../../PaperclipTest/Dummy2.html">PaperclipTest::Dummy2</a>
  
    <li><a href="../../UploadedFileAdapterTest.html">UploadedFileAdapterTest</a>
  
    <li><a href="../../UploadedFileAdapterTest/UploadedFile.html">UploadedFileAdapterTest::UploadedFile</a>
  
    <li><a href="../../AddImageToProducts.html">AddImageToProducts</a>
  
    <li><a href="../../AddPasswordDigestToUsers.html">AddPasswordDigestToUsers</a>
  
    <li><a href="../../AddRememberTokenToUsers.html">AddRememberTokenToUsers</a>
  
    <li><a href="../../AddSellingProductsToUsers.html">AddSellingProductsToUsers</a>
  
    <li><a href="../../AddUserIdProductIdToBid.html">AddUserIdProductIdToBid</a>
  
    <li><a href="../../AddUserNameToProducts.html">AddUserNameToProducts</a>
  
    <li><a href="../../ApplicationController.html">ApplicationController</a>
  
    <li><a href="../../ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="../../AttachmentAdapterTest.html">AttachmentAdapterTest</a>
  
    <li><a href="../../AttachmentContentTypeValidatorTest.html">AttachmentContentTypeValidatorTest</a>
  
    <li><a href="../../AttachmentHelpers.html">AttachmentHelpers</a>
  
    <li><a href="../../AttachmentOptionsTest.html">AttachmentOptionsTest</a>
  
    <li><a href="../../AttachmentPresenceValidatorTest.html">AttachmentPresenceValidatorTest</a>
  
    <li><a href="../../AttachmentSizeValidatorTest.html">AttachmentSizeValidatorTest</a>
  
    <li><a href="../../Bid.html">Bid</a>
  
    <li><a href="../../Book.html">Book</a>
  
    <li><a href="../../ContentTypeDetectorTest.html">ContentTypeDetectorTest</a>
  
    <li><a href="../../CreateBids.html">CreateBids</a>
  
    <li><a href="../../CreateProducts.html">CreateProducts</a>
  
    <li><a href="../../CreateUsers.html">CreateUsers</a>
  
    <li><a href="../../Dummy.html">Dummy</a>
  
    <li><a href="../../Factory.html">Factory</a>
  
    <li><a href="../../FakeModel.html">FakeModel</a>
  
    <li><a href="../../FileAdapterTest.html">FileAdapterTest</a>
  
    <li><a href="../../FileHelpers.html">FileHelpers</a>
  
    <li><a href="../../FileSystemTest.html">FileSystemTest</a>
  
    <li><a href="../../FixColumNameOfProductUserId.html">FixColumNameOfProductUserId</a>
  
    <li><a href="../../FogTest.html">FogTest</a>
  
    <li><a href="../../Four.html">Four</a>
  
    <li><a href="../../GeneratorTest.html">GeneratorTest</a>
  
    <li><a href="../../GeometryTest.html">GeometryTest</a>
  
    <li><a href="../../HaveAttachedFileMatcherTest.html">HaveAttachedFileMatcherTest</a>
  
    <li><a href="../../HtmlSelectorsHelpers.html">HtmlSelectorsHelpers</a>
  
    <li><a href="../../IdentityAdapterTest.html">IdentityAdapterTest</a>
  
    <li><a href="../../IntegrationTest.html">IntegrationTest</a>
  
    <li><a href="../../InterpolationsTest.html">InterpolationsTest</a>
  
    <li><a href="../../MetaClassTest.html">MetaClassTest</a>
  
    <li><a href="../../MockAttachment.html">MockAttachment</a>
  
    <li><a href="../../MockInterpolator.html">MockInterpolator</a>
  
    <li><a href="../../MockModel.html">MockModel</a>
  
    <li><a href="../../MockUrlGeneratorBuilder.html">MockUrlGeneratorBuilder</a>
  
    <li><a href="../../NavigationHelpers.html">NavigationHelpers</a>
  
    <li><a href="../../NilAdapterTest.html">NilAdapterTest</a>
  
    <li><a href="../../Object.html">Object</a>
  
    <li><a href="../../PaperclipGenerator.html">PaperclipGenerator</a>
  
    <li><a href="../../PaperclipMissingAttachmentStylesTest.html">PaperclipMissingAttachmentStylesTest</a>
  
    <li><a href="../../ProcessorTest.html">ProcessorTest</a>
  
    <li><a href="../../Product.html">Product</a>
  
    <li><a href="../../ProductsController.html">ProductsController</a>
  
    <li><a href="../../ProductsHelper.html">ProductsHelper</a>
  
    <li><a href="../../RailsCommandHelpers.html">RailsCommandHelpers</a>
  
    <li><a href="../../S3LiveTest.html">S3LiveTest</a>
  
    <li><a href="../../S3Test.html">S3Test</a>
  
    <li><a href="../../SchemaTest.html">SchemaTest</a>
  
    <li><a href="../../SessionsController.html">SessionsController</a>
  
    <li><a href="../../SessionsHelper.html">SessionsHelper</a>
  
    <li><a href="../../StaticPagesController.html">StaticPagesController</a>
  
    <li><a href="../../StringioFileProxyTest.html">StringioFileProxyTest</a>
  
    <li><a href="../../StyleTest.html">StyleTest</a>
  
    <li><a href="../../SubDummy.html">SubDummy</a>
  
    <li><a href="../../Three.html">Three</a>
  
    <li><a href="../../ThumbnailTest.html">ThumbnailTest</a>
  
    <li><a href="../../UriProxyTest.html">UriProxyTest</a>
  
    <li><a href="../../UrlGeneratorTest.html">UrlGeneratorTest</a>
  
    <li><a href="../../User.html">User</a>
  
    <li><a href="../../UsersController.html">UsersController</a>
  
    <li><a href="../../UsersHelper.html">UsersHelper</a>
  
    <li><a href="../../ValidateAttachmentContentTypeMatcherTest.html">ValidateAttachmentContentTypeMatcherTest</a>
  
    <li><a href="../../ValidateAttachmentPresenceMatcherTest.html">ValidateAttachmentPresenceMatcherTest</a>
  
    <li><a href="../../ValidateAttachmentSizeMatcherTest.html">ValidateAttachmentSizeMatcherTest</a>
  
    <li><a href="../../ValidatorsTest.html">ValidatorsTest</a>
  
    <li><a href="../../WelcomeHelper.html">WelcomeHelper</a>
  
    <li><a href="../../WithinHelpers.html">WithinHelpers</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Paperclip::Storage::Fog</h1>

  <div id="description" class="description">
    
<p>fog is a modern and versatile cloud computing library for Ruby. Among
others, it supports Amazon <a href="S3.html">S3</a> to store your files. In
contrast to the outdated AWS-<a href="S3.html">S3</a> gem it is actively
maintained and supports multiple locations. Amazonâ€™s <a
href="S3.html">S3</a> file hosting service is a scalable, easy place to
store files for distribution. You can find out more about it at <a
href="http://aws.amazon.com/s3">aws.amazon.com/s3</a> There are a few
fog-specific options for has_attached_file, which will be explained using
<a href="S3.html">S3</a> as an example:</p>
<ul><li>
<p><code>fog_credentials</code>: Takes a Hash with your credentials. For <a
href="S3.html">S3</a>, you can use the following format:</p>

<pre>aws_access_key_id: '&lt;your aws_access_key_id&gt;'
aws_secret_access_key: '&lt;your aws_secret_access_key&gt;'
provider: 'AWS'
region: 'eu-west-1'</pre>
</li><li>
<p><code>fog_directory</code>: This is the name of the <a
href="S3.html">S3</a> bucket that will store your files.  Remember that the
bucket must be unique across all of Amazon <a href="S3.html">S3</a>. If the
bucket does not exist, <a href="../../Paperclip.html">Paperclip</a> will
attempt to create it.</p>
</li><li>
<p><code>path</code>: This is the key under the bucket in which the file will
be stored. The URL will be constructed from the bucket and the path. This
is what you will want to interpolate. Keys should be unique, like
filenames, and despite the fact that <a href="S3.html">S3</a> (strictly
speaking) does not support directories, you can still use a / to separate
parts of your file name.</p>
</li><li>
<p><code>fog_public</code>: (optional, defaults to true) Should the uploaded
files be public or not? (true/false)</p>
</li><li>
<p><code>fog_host</code>: (optional) The fully-qualified domain name (FQDN)
that is the alias to the <a href="S3.html">S3</a> domain of your bucket,
e.g. '<a href="http://images.example.com">images.example.com</a>'. This can
also be used in conjunction with Cloudfront (<a
href="http://aws.amazon.com/cloudfront">aws.amazon.com/cloudfront</a>)</p>
</li></ul>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="AWS_BUCKET_SUBDOMAIN_RESTRICTON_REGEX">AWS_BUCKET_SUBDOMAIN_RESTRICTON_REGEX
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-extended" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extended</span><span
            class="method-args">(base)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="extended-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extended</span> <span class="ruby-identifier">base</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">'fog'</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; (You may need to install the fog gem)&quot;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Fog</span>)

  <span class="ruby-identifier">base</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:url</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">%r^:fog.*url$/</span>)
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:path</span>]  = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:path</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r:url/</span>, <span class="ruby-ivar">@options</span>[<span class="ruby-value">:url</span>]).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r^:rails_root\/public\/system\//</span>, <span class="ruby-string">''</span>)
      <span class="ruby-ivar">@options</span>[<span class="ruby-value">:url</span>]   = <span class="ruby-string">':fog_public_url'</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Paperclip</span>.<span class="ruby-identifier">interpolates</span>(<span class="ruby-value">:fog_public_url</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">public_url</span>(<span class="ruby-identifier">style</span>)
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Paperclip</span><span class="ruby-operator">::</span><span class="ruby-constant">Interpolations</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:fog_public_url</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- extended-source -->
          
        </div>

        

        
      </div><!-- extended-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-copy_to_local_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_to_local_file</span><span
            class="method-args">(style, local_dest_path)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="copy_to_local_file-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">copy_to_local_file</span>(<span class="ruby-identifier">style</span>, <span class="ruby-identifier">local_dest_path</span>)
  <span class="ruby-identifier">log</span>(<span class="ruby-node">&quot;copying #{path(style)} to local file #{local_dest_path}&quot;</span>)
  <span class="ruby-identifier">local_file</span> = <span class="ruby-operator">::</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">local_dest_path</span>, <span class="ruby-string">'wb'</span>)
  <span class="ruby-identifier">file</span> = <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">path</span>(<span class="ruby-identifier">style</span>))
  <span class="ruby-identifier">local_file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">file</span>.<span class="ruby-identifier">body</span>)
  <span class="ruby-identifier">local_file</span>.<span class="ruby-identifier">close</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-operator">::</span><span class="ruby-constant">Fog</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;#{e} - cannot copy #{path(style)} to local file #{local_dest_path}&quot;</span>)
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- copy_to_local_file-source -->
          
        </div>

        

        
      </div><!-- copy_to_local_file-method -->

    
      <div id="method-i-exists-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">exists?</span><span
            class="method-args">(style = default_style)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="exists-3F-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">style</span> = <span class="ruby-identifier">default_style</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">original_filename</span>
    <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">head</span>(<span class="ruby-identifier">path</span>(<span class="ruby-identifier">style</span>))
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- exists-3F-source -->
          
        </div>

        

        
      </div><!-- exists-3F-method -->

    
      <div id="method-i-expiring_url" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">expiring_url</span><span
            class="method-args">(time = (Time.now + 3600), style = default_style)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="expiring_url-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">expiring_url</span>(<span class="ruby-identifier">time</span> = (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">+</span> <span class="ruby-value">3600</span>), <span class="ruby-identifier">style</span> = <span class="ruby-identifier">default_style</span>)
  <span class="ruby-identifier">expiring_url</span> = <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">get_http_url</span>(<span class="ruby-identifier">path</span>(<span class="ruby-identifier">style</span>), <span class="ruby-identifier">time</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_host</span>]
    <span class="ruby-identifier">expiring_url</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">%r#{host_name_for_directory}/</span>, <span class="ruby-identifier">dynamic_fog_host_for_style</span>(<span class="ruby-identifier">style</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">expiring_url</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- expiring_url-source -->
          
        </div>

        

        
      </div><!-- expiring_url-method -->

    
      <div id="method-i-flush_deletes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">flush_deletes</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="flush_deletes-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">flush_deletes</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@queued_for_delete</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">log</span>(<span class="ruby-node">&quot;deleting #{path}&quot;</span>)
    <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>).<span class="ruby-identifier">destroy</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@queued_for_delete</span> = []
<span class="ruby-keyword">end</span></pre>
          </div><!-- flush_deletes-source -->
          
        </div>

        

        
      </div><!-- flush_deletes-method -->

    
      <div id="method-i-flush_writes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">flush_writes</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="flush_writes-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">flush_writes</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">style</span>, <span class="ruby-identifier">file</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@queued_for_write</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">log</span>(<span class="ruby-node">&quot;saving #{path(style)}&quot;</span>)
    <span class="ruby-identifier">retried</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">fog_file</span>.<span class="ruby-identifier">merge</span>(
        <span class="ruby-value">:body</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">file</span>,
        <span class="ruby-value">:key</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>(<span class="ruby-identifier">style</span>),
        <span class="ruby-value">:public</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fog_public</span>(<span class="ruby-identifier">style</span>),
        <span class="ruby-value">:content_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">content_type</span>
      ))
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Excon</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">NotFound</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">retried</span>
      <span class="ruby-identifier">retried</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-keyword">retry</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">file</span>.<span class="ruby-identifier">rewind</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">after_flush_writes</span> <span class="ruby-comment"># allows attachment to clean up temp files</span>

  <span class="ruby-ivar">@queued_for_write</span> = {}
<span class="ruby-keyword">end</span></pre>
          </div><!-- flush_writes-source -->
          
        </div>

        

        
      </div><!-- flush_writes-method -->

    
      <div id="method-i-fog_credentials" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fog_credentials</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="fog_credentials-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fog_credentials</span>
  <span class="ruby-ivar">@fog_credentials</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">parse_credentials</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_credentials</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- fog_credentials-source -->
          
        </div>

        

        
      </div><!-- fog_credentials-method -->

    
      <div id="method-i-fog_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fog_file</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="fog_file-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fog_file</span>
  <span class="ruby-ivar">@fog_file</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_file</span>] <span class="ruby-operator">||</span> {}
<span class="ruby-keyword">end</span></pre>
          </div><!-- fog_file-source -->
          
        </div>

        

        
      </div><!-- fog_file-method -->

    
      <div id="method-i-fog_public" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fog_public</span><span
            class="method-args">(style = default_style)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="fog_public-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fog_public</span>(<span class="ruby-identifier">style</span> = <span class="ruby-identifier">default_style</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_public</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_public</span>][<span class="ruby-identifier">style</span>])
      <span class="ruby-keyword">return</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_public</span>][<span class="ruby-identifier">style</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_public</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- fog_public-source -->
          
        </div>

        

        
      </div><!-- fog_public-method -->

    
      <div id="method-i-parse_credentials" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse_credentials</span><span
            class="method-args">(creds)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="parse_credentials-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse_credentials</span>(<span class="ruby-identifier">creds</span>)
  <span class="ruby-identifier">creds</span> = <span class="ruby-identifier">find_credentials</span>(<span class="ruby-identifier">creds</span>).<span class="ruby-identifier">stringify_keys</span>
  <span class="ruby-identifier">env</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-value">:Rails</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  (<span class="ruby-identifier">creds</span>[<span class="ruby-identifier">env</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">creds</span>).<span class="ruby-identifier">symbolize_keys</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- parse_credentials-source -->
          
        </div>

        

        
      </div><!-- parse_credentials-method -->

    
      <div id="method-i-public_url" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">public_url</span><span
            class="method-args">(style = default_style)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="public_url-source">
            <pre><span class="ruby-comment"># File vendor/plugins/paperclip/lib/paperclip/storage/fog.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">public_url</span>(<span class="ruby-identifier">style</span> = <span class="ruby-identifier">default_style</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:fog_host</span>]
    <span class="ruby-node">&quot;#{dynamic_fog_host_for_style(style)}/#{path(style)}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">fog_credentials</span>[<span class="ruby-value">:provider</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'AWS'</span>
      <span class="ruby-node">&quot;https://#{host_name_for_directory}/#{path(style)}&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">directory</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">path</span>(<span class="ruby-identifier">style</span>)).<span class="ruby-identifier">public_url</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- public_url-source -->
          
        </div>

        

        
      </div><!-- public_url-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

